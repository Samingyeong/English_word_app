"use client";

/**
 * 어몽어스 크루 메이트 아이콘 (제공 SVG 경로 기반)
 * 원본 캐릭터 비율·윤곽·비저 유지, body 색상만 prop으로 변경.
 */
const CREWMATE_COLORS: Record<string, string> = {
  red: "#DF3434",
  lime: "#93DA5C",
  cyan: "#10BFD4",
  yellow: "#EED866",
  orange: "#F08C30",
  pink: "#FA81C9",
};

type CrewmateColor = keyof typeof CREWMATE_COLORS;

/* 원본 SVG viewBox 기준 한 명 크기: ~341 x 408. 경로는 빨간 크루(원본) 기준. */
const BODY_PATH =
  "M164.753 325.113V350.375C164.753 369.18 149.509 384.424 130.704 384.424H105.442C86.6374 384.424 71.3931 369.18 71.3931 350.375L71.3931 287.769H49.9752C34.5068 287.769 21.9672 275.229 21.9672 259.761V142.237C21.9672 126.768 34.5068 114.229 49.9752 114.229H72.8737C81.5189 61.8868 126.986 21.9667 181.778 21.9667C237.425 21.9667 283.454 63.1429 291.06 116.689C308.198 128.395 319.463 148.073 319.508 170.401C319.525 178.715 317.985 186.668 315.163 193.987C310.538 205.982 302.467 216.27 292.163 223.634V233.949V285.572C292.163 296.743 287.53 306.833 280.081 314.023L280.081 351.473C280.081 370.278 264.836 385.522 246.032 385.522H220.769C201.965 385.522 186.72 370.278 186.72 351.473V325.113H164.753Z";
const SHADOW_PATH =
  "M71.3931 132.352C71.3931 126.18 71.8998 120.126 72.8737 114.229H49.9752C34.5068 114.229 21.9672 126.769 21.9672 142.237V259.761C21.9672 275.23 34.5068 287.769 49.9752 287.769H71.3931L71.3931 350.376C71.3931 369.18 86.6374 384.425 105.442 384.425H130.704C149.509 384.425 164.753 369.18 164.753 350.376V325.114H162.557C131.853 325.114 104.694 309.935 88.1751 286.671C84.0921 280.921 80.6591 274.677 77.9833 268.046C73.733 257.513 71.3931 246.005 71.3931 233.95V132.352ZM200.999 325.114H186.72V351.474C186.72 370.279 201.965 385.523 220.769 385.523H246.032C264.836 385.523 280.081 370.279 280.081 351.474L280.081 314.024C287.53 306.833 292.163 296.744 292.163 285.573V233.95C292.163 254.08 285.638 272.686 274.588 287.769C258.001 310.411 231.217 325.114 200.999 325.114Z";
const VISOR_PATH =
  "M98.9841 170.955C98.9111 134.951 128.039 105.691 164.043 105.6L254.185 105.374C290.189 105.284 319.435 134.398 319.508 170.402V170.402C319.581 206.406 290.453 235.666 254.449 235.757L164.307 235.983C128.303 236.073 99.057 206.959 98.9841 170.955V170.955Z";
const VISOR_HIGHLIGHT_PATH =
  "M169.168 122.645C169.156 118.084 172.844 114.379 177.405 114.37L241.989 114.246C246.55 114.237 250.257 117.927 250.269 122.488V122.488C250.282 127.049 246.594 130.754 242.033 130.763L177.449 130.887C172.888 130.896 169.18 127.206 169.168 122.645V122.645Z";
const VISOR_DARK_PATH =
  "M123.076 120.203C120.269 127.505 118.738 135.437 118.755 143.727C118.828 179.731 148.074 208.845 184.078 208.755L274.22 208.529C289.753 208.49 304.006 203.021 315.187 193.924C305.803 218.333 282.163 235.686 254.449 235.756L164.308 235.982C128.303 236.072 99.0571 206.958 98.9842 170.954C98.9427 150.483 108.341 132.192 123.076 120.203Z";
const STROKE_PATH =
  "M175.33 384.238C165.099 397.7 148.917 406.392 130.704 406.392H105.442C74.5053 406.392 49.426 381.312 49.426 350.375L49.426 309.733C22.0785 309.439 0 287.178 0 259.761V142.237C0 114.637 22.3746 92.2619 49.9752 92.2619H55.6126C72.6011 38.7612 122.646 0 181.778 0C245.328 0 298.387 44.7706 311.189 104.498C329.66 120.412 341.422 144.001 341.475 170.357C341.498 181.432 339.443 192.078 335.659 201.89C330.924 214.17 323.505 225.088 314.13 233.94V285.572C314.13 299.282 309.627 311.963 302.048 322.185V351.474C302.048 382.411 276.968 407.49 246.032 407.49H220.769C202.066 407.49 185.504 398.324 175.33 384.238ZM280.081 314.024C287.53 306.833 292.163 296.744 292.163 285.572V223.635C302.467 216.271 310.537 205.983 315.163 193.987C317.985 186.669 319.525 178.715 319.508 170.402C319.463 148.074 308.198 128.396 291.06 116.689C283.454 63.1434 237.425 21.9671 181.778 21.9671C126.986 21.9671 81.5188 61.8872 72.8736 114.229H49.9752C34.5067 114.229 21.9671 126.769 21.9671 142.237V259.761C21.9671 275.229 34.5067 287.769 49.9752 287.769H71.3931V350.375C71.3931 369.18 86.6374 384.424 105.442 384.424H130.704C149.509 384.424 164.753 369.18 164.753 350.375V325.113H186.72V351.474C186.72 370.278 201.965 385.523 220.769 385.523H246.032C264.836 385.523 280.081 370.278 280.081 351.474L280.081 314.024Z";

const VIEWBOX_WIDTH = 342;
const VIEWBOX_HEIGHT = 408;

interface CrewmateIconProps {
  color?: CrewmateColor;
  size?: number;
  className?: string;
}

export function CrewmateIcon({
  color = "red",
  size = 48,
  className = "",
}: CrewmateIconProps) {
  const bodyColor = CREWMATE_COLORS[color] ?? CREWMATE_COLORS.red;

  return (
    <svg
      width={size}
      height={size}
      viewBox={`0 0 ${VIEWBOX_WIDTH} ${VIEWBOX_HEIGHT}`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      preserveAspectRatio="xMidYMid meet"
    >
      {/* Body */}
      <path fillRule="evenodd" clipRule="evenodd" d={BODY_PATH} fill={bodyColor} />
      {/* Shadow (multiply) */}
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d={SHADOW_PATH}
        fill="rgba(0,0,0,0.25)"
        style={{ mixBlendMode: "multiply" }}
      />
      {/* Visor */}
      <path d={VISOR_PATH} fill="#B4E2F5" />
      {/* Visor highlight */}
      <path d={VISOR_HIGHLIGHT_PATH} fill="white" />
      {/* Visor dark (multiply) */}
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d={VISOR_DARK_PATH}
        fill="rgba(0,0,0,0.5)"
        style={{ mixBlendMode: "multiply" }}
      />
      {/* Outline stroke */}
      <path fillRule="evenodd" clipRule="evenodd" d={STROKE_PATH} fill="black" />
    </svg>
  );
}

export const CREWMATE_COLOR_KEYS = Object.keys(CREWMATE_COLORS) as CrewmateColor[];
